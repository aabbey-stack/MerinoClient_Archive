// ReSharper disable InconsistentNaming

using UnityEngine;
using Random = System.Random;

namespace MerinoClient.HarmonyPatches.Exploits;

internal class UnityEngineTimePatch : PatchObject
{
    private static readonly Random _random = new();

    public UnityEngineTimePatch()
    {
        Patch(typeof(Time).GetProperty(nameof(Time.smoothDeltaTime))?.GetGetMethod(),
            postfix: GetLocalPatch(nameof(SmoothDeltaTimePatch)));
    }

    private static void SmoothDeltaTimePatch(ref float __result)
    {
        if (!Config.SpoofFPS.Value) return;
        //https://www.codegrepper.com/code-examples/csharp/c%23+random+float+between+two+numbers
        var val = _random.NextDouble() * (0.007184575 - 0.01120994f) + 0.01120994f;
        __result = (float)val;
    }
}