using VRC.Core;

// ReSharper disable InconsistentNaming
// ReSharper disable RedundantAssignment

namespace MerinoClient.HarmonyPatches.Exploits;

internal class APIUserPatches : PatchObject
{
    public APIUserPatches()
    {
        Patch(typeof(APIUser).GetProperty(nameof(APIUser.allowAvatarCopying))?.GetSetMethod(),
            GetLocalPatch(nameof(AllowAvatarCopyingPatch)));

        Patch(typeof(APIUser).GetProperty(nameof(APIUser.showSocialRank))?.GetMethod,
            postfix: GetLocalPatch(nameof(ShowSocialRankPatch)));
    }

    // when patching a setter use __0
    private static void AllowAvatarCopyingPatch(ref bool __0)
    {
        __0 = true;
    }

    // when patching a getter and changing result of the property use __result
    private static void ShowSocialRankPatch(ref bool __result)
    {
        __result = true;
    }
}